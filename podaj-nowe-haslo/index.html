<!DOCTYPE html>
<!--  This site was created in Webflow. https://webflow.com  --><!--  Last Published: Thu Jun 26 2025 18:54:21 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="685d85d4c2c8b47b41f34ee6" data-wf-site="685d85d4c2c8b47b41f34ee7">

<head>
  <meta charset="utf-8">
  <title>Copy of Finapla Przypomnij Hasło</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/finxplaner-login-95a5ba27-9dd9ea33b7171.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script
    type="text/javascript">WebFont.load({ google: { families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic"] } });</script>
  <script
    type="text/javascript">!function (o, c) { var n = c.documentElement, t = " w-mod-"; n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch") }(window, document);</script>
  <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
</head>

<body class="body">
  <div class="div-block-4">
    <a href="https://www.finapla.pl/" class="w-inline-block"><img src="images/finapla.svg" loading="lazy" width="200"
        alt=""></a>
  </div>
  <div class="loginwrapper">
    <div class="loginandtextwrapper">
      <div class="logowanieprawawrapper">
        <div class="loginblurbg">
          <div class="passwordupdated">
            <div class="lottie-animation" data-w-id="b587bd97-c283-0eaf-1211-c5daceaf9eff" data-animation-type="lottie"
              data-src="documents/Animation---1750959707647.json" data-loop="1" data-direction="1" data-autoplay="1"
              data-is-ix2-target="0" data-renderer="svg" data-default-duration="0" data-duration="2.5191857499106445">
            </div>
            <div class="text-block-5">Hasło zostało zaktualizowane!</div>
          </div>
          <div class="wpiszemailwrapper">
            <h1 class="heading">Podaj nowe hasło</h1>
            <div class="line"></div>
            <div class="w-form">
              <form id="email-form" name="email-form" data-name="Email Form" method="get" class="form"
                data-wf-page-id="685d85d4c2c8b47b41f34ee6" data-wf-element-id="852c1829-f11b-716f-8943-dc9cca2cd488">
                <label for="email" class="field-label"><span class="text-span-4">Wpisz nowe hasło do
                    konta</span></label><input class="text-field w-input" maxlength="256" name="email" data-name="Email"
                  placeholder="" type="password" id="email" required=""><label for="email" class="field-label"><span
                    class="text-span-4">Powtórz nowe hasło</span></label><input class="text-field w-input"
                  maxlength="256" name="email" data-name="Email" placeholder="" type="password" id="email" required="">
                <div class="text-block-8">*Hasło musi mieć minimum 6 znaków</div><input type="submit"
                  data-wait="Wysyłanie..." class="submit-button seckondary w-button" value="Zaktualizuj hasło">
              </form>
            </div>
          </div>
        </div>
        <div class="backbuttonwrapper">
          <a href="https://financeplan-topaz.vercel.app/logowanie/index.html" class="link-block w-inline-block"><img
              src="images/arrow-white-finapla.svg" loading="lazy" width="8" alt="">
            <div class="text-block-7">Powrót do logowania</div>
          </a>
        </div>
      </div>
    </div>
  </div>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=685d85d4c2c8b47b41f34ee7"
    type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <script type="module">
    import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

    const supabase = createClient(
      "https://vptpascqhmpmgnufevks.supabase.co",
      "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZwdHBhc2NxaG1wbWdudWZldmtzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc2NTcwNDEsImV4cCI6MjA2MzIzMzA0MX0.5Vtk65gjiUG0VrBqbukwikF02SX5z55xV-Ag3U4CGp0"
    );

    const url = new URL(window.location.href);
    // Pobierz tokeny z fragmentu URL (#access_token=...)
    const hashParams = new URLSearchParams(window.location.hash.substring(1));
    const accessToken = hashParams.get("access_token");
    const refreshToken = hashParams.get("refresh_token");
    const type = hashParams.get("type");

    // Sprawdź i ustaw sesję
    if (accessToken && refreshToken && type === "recovery") {
      const { error } = await supabase.auth.setSession({
        access_token: accessToken,
        refresh_token: refreshToken,
      });

      if (error) {
        alert("Błąd sesji. Spróbuj ponownie przez link z maila.");
      }
    } else {
      alert("Brak tokenu dostępu. Otwórz link resetu hasła z e-maila.");
    }

    const form = document.querySelector("#email-form");
    const inputs = form.querySelectorAll("input[type='password']");
    const button = form.querySelector("input[type='submit']");
    const wrapper = document.querySelector(".wpiszemailwrapper");
    const success = document.querySelector(".passwordupdated");

    const submitBtn = document.querySelector("input[type='submit']");
    const passwordInput1 = inputs[0];
    const passwordInput2 = inputs[1];
    submitBtn.addEventListener("click", async () => {
      const password1 = passwordInput1.value;
      const password2 = passwordInput2.value;

      if (password1.length < 6) {
        alert("Hasło musi mieć minimum 6 znaków.");
        return;
      }

      if (password1 !== password2) {
        alert("Hasła nie są takie same.");
        return;
      }

      submitBtn.disabled = true;
      submitBtn.innerText = "Czekaj...";

      const { error: updateError } = await supabase.auth.updateUser({
        password: password1,
      });

      if (updateError) {
        alert("Błąd przy aktualizacji hasła: " + updateError.message);
        console.error(updateError);
        submitBtn.disabled = false;
        submitBtn.innerText = "Zaktualizuj hasło";
        return;
      }

      // ✅ SUKCES — pokazujemy komunikat, chowamy formularz
      document.getElementById("passwordupdated").style.display = "block";
      document.getElementById("wpiszemailwrapper").style.display = "none";

      // (Opcjonalnie) Przekierowanie po 3 sekundach
      setTimeout(() => {
        window.location.href = "/logowanie";
      }, 3000);
    });
  </script>
</body>

</html>