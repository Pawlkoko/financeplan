<!DOCTYPE html>
<!--  This site was created in Webflow. https://webflow.com  --><!--  Last Published: Mon May 19 2025 23:06:19 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="682b7e84a37f1c21053d0196" data-wf-site="682b7e84a37f1c21053d018d">

<head>
  <meta charset="utf-8">
  <title>FinanceDashboard</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/financedashboard.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script
    type="text/javascript">WebFont.load({ google: { families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic", "Inconsolata:400,700"] } });</script>
  <script
    type="text/javascript">!function (o, c) { var n = c.documentElement, t = " w-mod-"; n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch") }(window, document);</script>
  <link href="images/favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
</head>

<body>
  <section class="header_section">
    <div class="div-block-14">
      <h1 class="logo">FINANCEXPLANER</h1>
      <div class="text-block-3">USERNAME</div>
    </div>
  </section>
  <section>
    <div class="div-block-15"></div>
  </section>
  <section class="tabs_section">
    <div class="tabs_wrapper">
      <div data-current="Tab 1" data-easing="ease" data-duration-in="300" data-duration-out="100" class="tabs w-tabs">
        <div class="tabs-menu w-tab-menu">
          <a data-w-tab="Tab 1" class="tab-link-tab-1 w-inline-block w-tab-link w--current">
            <div>Tab 1</div>
          </a>
          <a data-w-tab="Tab 2" class="tab-link-tab-2 w-inline-block w-tab-link">
            <div>Tab 2</div>
          </a>
          <a data-w-tab="Tab 3" class="tab-link-tab-3 w-inline-block w-tab-link">
            <div>Tab 3</div>
          </a>
        </div>
        <div class="tabs-content w-tab-content">
          <div data-w-tab="Tab 1" class="w-tab-pane w--tab-active">
            <section class="config-step-2">
              <div class="div-block-10">
                <h1 class="heading-4">Prawie gotowe...</h1>
              </div>
              <div class="div-block-9">
                <p class="paragraph">Prawie gotowe! Teraz tylko powiąż bota z Twoim kontem klikając w ten link!</p>
              </div>
              <div class="div-block-7">
                <div class="form-block w-form">
                  <label for="name-2" class="field-label"><strong>Otwórz bota w telegramie:</strong></label>
                  <a id="tg-button" class="submit-button w-button" target="_blank">Podłącz bota</a>
                  <div class="w-form-done">
                    <div>Google sheet został zaktualizowany!</div>
                  </div>
                  <div class="w-form-fail">
                    <div class="text-block">Coś poszło nie tak podczas wysyłania formularza</div>
                  </div>
                </div>
              </div>
            </section>
            <section class="config-step-3">
              <div class="div-block-10">
                <h1 class="heading-4">Bot działa</h1>
              </div>
              <div class="div-block-9">
                <p class="paragraph">Od teraz AI Przeanalizuje każdą Twoją wiadomość, wyciągnie Twoje koszta i podsumuje
                  je w tabeli! Tutaj lista dodatkowym komend: <br>‍</p>
              </div>
              <div class="komendy">
                <div class="div-block-12">
                  <div class="komenda">Proszę o podsumowanie <span class="text-span-2">lub </span>/podsumowanie</div>
                </div>
                <div class="opis">- użyj we wiadomości aby otrzymać podsumowanie wydatków</div>
              </div>
              <div class="komendy">
                <div class="div-block-12">
                  <div class="komenda">Proszę o link <span class="text-span-3">lub</span> <span>/link</span></div>
                </div>
                <div class="opis">- użyj we wiadomości aby otrzymać podsumowanie wydatków</div>
              </div>
            </section>
          </div>
          <div data-w-tab="Tab 2" class="w-tab-pane"></div>
          <div data-w-tab="Tab 3" class="w-tab-pane"></div>
        </div>
      </div>
    </div>
  </section>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=682b7e84a37f1c21053d018d"
    type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script>
    const supabase = window.supabase.createClient(
      'https://vptpascqhmpmgnufevks.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZwdHBhc2NxaG1wbWdudWZldmtzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc2NTcwNDEsImV4cCI6MjA2MzIzMzA0MX0.5Vtk65gjiUG0VrBqbukwikF02SX5z55xV-Ag3U4CGp0'
    );

    document.addEventListener("DOMContentLoaded", async () => {
      const { data: { session }, error } = await supabase.auth.getSession();

      if (!session || !session.user) {
        alert("Musisz być zalogowany.");
        window.location.href = "/";
        return;
      }

      const user = session.user;
      const { data, error: fetchError } = await supabase
        .from('users_config') // ← podmień na nazwę Twojej tabeli jeśli inna
        .select('telegram_id')
        .eq('id', user.id)
        .single();

      if (fetchError) {
        console.error("Błąd przy pobieraniu telegram_id:", fetchError);
        return;
      }

      if (data && data.telegram_id) {
        // Telegram już podpięty → od razu pokazujemy krok 3
        document.querySelector(".config-step-2").style.display = "none";
        document.querySelector(".config-step-3").style.display = "block";
      } else {
        // Nie podpiął jeszcze → pokaż link do bota
        const botUsername = "Persxfinance_bot";
        const tgUrl = `https://t.me/${botUsername}?start=${user.id}`;

        const btn = document.getElementById("tg-button");
        if (btn) {
          btn.href = tgUrl;
          btn.addEventListener("click", () => {
            document.querySelector(".config-step-2").style.display = "none";
            document.querySelector(".config-step-3").style.display = "block";
          });
        }
      }
    });
  </script>
</body>

</html>