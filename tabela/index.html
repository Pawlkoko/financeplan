<!DOCTYPE html>

<!--  This site was created in Webflow. https://webflow.com  --><!--  Last Published: Fri Jul 11 2025 18:16:10 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="686fc94f73e5399aea336026" data-wf-site="686fc94f73e5399aea336027">
<head>
<meta charset="utf-8"/>
<title>Tabelka</title>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="Webflow" name="generator"/>
<link href="css/normalize.css" rel="stylesheet" type="text/css"/>
<link href="css/webflow.css" rel="stylesheet" type="text/css"/>
<link href="css/finxplaner-login-95a5ba27-a483aa21c3e9f.webflow.css" rel="stylesheet" type="text/css"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="anonymous" href="https://fonts.gstatic.com" rel="preconnect"/>
<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
<script type="text/javascript">WebFont.load({ google: { families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic", "Vollkorn:400,400italic,700,700italic"] } });</script>
<script type="text/javascript">!function (o, c) { var n = c.documentElement, t = " w-mod-"; n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch") }(window, document);</script>
<link href="images/favicon.png" rel="shortcut icon" type="image/x-icon"/>
<link href="images/webclip.png" rel="apple-touch-icon"/>
<style>
    /* FULL RESET SELECTA */
    .dataTable-selector {
      background-color: transparent !important;
      color: white !important;
      border: 1px solid white !important;
      border-radius: 8px !important;
      padding: 6px 12px !important;
      font-family: 'Montserrat', sans-serif !important;
      font-size: 14px !important;
      cursor: pointer !important;
      appearance: none !important;
      -webkit-appearance: none !important;
      -moz-appearance: none !important;
      outline: none !important;
      box-shadow: none !important;

      .dataTable-selector:hover {
        background-color: rgba(255, 255, 255, 0.1) !important;
        color: #d0ef0b !important;
        border-color: #d0ef0b !important;
      }

      /* Strzałka własna (opcjonalnie, jeśli użyjesz tła z SVG) */
      .dataTable-selector::after {
        content: '▼';
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        pointer-events: none;
      }

      /* Hover */
      .dataTable-selector:hover {
        background-color: #2a2a2a !important;
        color: #d0ef0b !important;
        border-color: #d0ef0b !important;
      }

      .dataTable-selector {
        background-color: solid !important;
        color: #474747 !important;
        border: 1px solid #707070 !important;
        border-radius: 8px !important;
        padding: 5px 10px !important;
        font-family: Montserrat, sans-serif !important;
        font-size: 14px !important;
        cursor: pointer !important;
      }

      .dataTable-selector:hover {
        background-color: rgba(255, 255, 255, 0.1) !important;
        color: #707070 !important;
        border-color: #d0ef0b !important;
      }

      body {
        font-family: 'Montserrat', sans-serif;
        background-color: #121212;
        color: white;
        margin: 0;
        padding: 20px;
      }

      #tabelawrapper {
        display: block !important;
        overflow-x: auto;
        padding: 20px;
        width: 100%;
      }

      #tabela {
        width: 100% !important;
        table-layout: auto !important;
        border-collapse: collapse;
      }

      #tabela th,
      #tabela td {
        min-width: 120px;
        padding: 12px;
        color: #eee;
        border-bottom: none;
        word-break: break-word;
        white-space: normal;
        text-align: left;
      }

      #tabela th {
        color: white;
        font-weight: bold;
      }

      #tabela tr:hover {
        background-color: rgba(255, 255, 255, 0.05);
      }

      .dataTable-selector {
        background-color: transparent !important;
        color: white !important;
        border: 1px solid white !important;
        border-radius: 8px !important;
        padding: 6px 12px !important;
        font-family: 'Montserrat', sans-serif !important;
        font-size: 14px !important;
        cursor: pointer !important;
      }

      .dataTable-selector:hover {
        background-color: rgba(255, 255, 255, 0.1) !important;
        color: #d0ef0b !important;
        border-color: #d0ef0b !important;
      }

      .dataTable-wrapper label {
        color: white !important;
        font-family: 'Montserrat', sans-serif !important;
        font-size: 14px;
      }

      .dataTable-pagination a {
        background-color: transparent !important;
        border: 1px solid white !important;
        color: white !important;
        padding: 5px 10px;
        border-radius: 6px;
        margin: 0 2px;
        transition: 0.2s ease all;
      }

      .dataTable-pagination a:hover {
        background-color: white !important;
        color: black !important;
      }

      .dataTable-pagination .active {
        background-color: #d0ef0b !important;
        color: black !important;
        font-weight: bold !important;
      }

      .dataTable-selector {
        background-color: #1e1e1e !important;
        color: white !important;
        border: 1px solid #888 !important;
        border-radius: 6px !important;
        padding: 6px 12px !important;
        font-size: 14px !important;
        font-family: 'Montserrat', sans-serif !important;
        appearance: none !important;
        -webkit-appearance: none !important;
        -moz-appearance: none !important;
        outline: none !important;
        box-shadow: none !important;
      }

      .dataTable-selector:hover {
        background-color: #2a2a2a !important;
        border-color: #d0ef0b !important;
        color: #d0ef0b !important;
      }

      /* Zmieniamy kolor labela „Wierszy na stronę” */
      .dataTable-wrapper label {
        color: white !important;
        font-family: 'Montserrat', sans-serif !important;
        font-size: 14px !important;
      }

      #tabela tbody tr:nth-child(even) {
        background-color: #2a2a2a;
      }

      #tabela tbody tr:nth-child(odd) {
        background-color: #3A3A3A;
      }

      .search-input.w-input {
        color: white !important;
        caret-color: white !important;
        background-color: #1e1e1e !important;
        border: 1px solid #888 !important;
      }
  </style>

<style>
body {
  background-color: #121212;
  color: white;
  font-family: Arial, sans-serif;
}

.searchbarwrapper {
  margin-bottom: 20px;
}

.search-input {
  background-color: #2a2a2a;
  color: white;
  border: 1px solid #555;
  padding: 10px;
  border-radius: 5px;
  width: 100%;
}

.dataTable-wrapper {
  background-color: #1e1e1e;
  padding: 20px;
  border-radius: 10px;
  overflow-x: auto;
}

.dataTable-table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 10px;
}

.dataTable-table th,
.dataTable-table td {
  padding: 10px;
  border-bottom: 1px solid #444;
  text-align: left;
}

.dataTable-table tr:nth-child(even) {
  background-color: #2a2a2a;
}

.dataTable-pagination a {
  color: white;
  padding: 6px 10px;
  border: 1px solid #444;
  border-radius: 4px;
  margin: 0 2px;
  text-decoration: none;
}

.dataTable-pagination a.active {
  background-color: #3a3a3a;
  border-color: #666;
}

.dataTable-selector,
select {
  background-color: #2a2a2a;
  color: white;
  border: 1px solid #444;
  padding: 5px;
  border-radius: 4px;
}

.dataTable-info {
  color: #bbb;
  font-size: 0.9em;
}
</style>
</head>
<body class="body">
<section class="header_section">
<div class="navbar-logo-left">
<div class="navbar-logo-left-container shadow-three w-nav" data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner">
<div class="container">
<div class="navbar-wrapper">
<a class="navbar-brand w-nav-brand" href="https://finapla.pl/"><img alt="" class="image-7" loading="lazy" src="https://cdn.prod.website-files.com/682b7e84a37f1c21053d018d/6855ece82c6eb1f4290559e6_finapla.svg" width="160"/></a>
<nav class="nav-menu-wrapper w-nav-menu" role="navigation">
<div>
<ul class="nav-menu-two w-list-unstyled" role="list">
<li>
<div class="div-block-17"><img alt="" class="image-3" height="20" loading="lazy" src="images/user-icon.svg" width="20"/>
<div class="text-block-3">usermail@onet.pl</div>
</div>
</li>
<li>
<div class="nav-divider"></div>
</li>
<li class="mobile-margin-top-10">
<a class="button-primary w-button" href="#">Wyloguj</a>
</li>
</ul>
</div>
</nav>
<div class="menu-button w-nav-button">
<div class="icon w-icon-nav-menu"></div>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="powiadomieniewrapper"><img alt="" class="powiadomienie_icon" height="25" loading="lazy" sizes="(max-width: 767px) 25px, (max-width: 991px) 3vw, 25px" src="images/Bez-nazwy-1.webp" srcset="images/Bez-nazwy-1-p-500.webp 500w, images/Bez-nazwy-1.webp 644w" width="25"/>
<div class="powiadomienie_tekst">Występują chwilowe problemy z funkcją filtrowania tabeli. Przepraszamy za
      utrudnienia</div>
</section>
<div class="loginwrapper">
<div class="loginandtextwrapper">
<h1 class="heading">Twoje wydatki</h1>
<div class="logowanieprawawrapper">
<div class="div-block-18">
<div class="dropdownslist">
<div class="dropdown w-dropdown" data-delay="0" data-hover="false">
<div class="dropdown-toggle w-dropdown-toggle">
<div class="w-icon-dropdown-toggle"></div>
<div class="text-block-10">Miesiąc</div>
</div>
<nav class="dropdown-list-2 w-dropdown-list">
<a class="dropdown-link-3 w-dropdown-link" href="#">Styczeń</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Luty</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Marzec</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Kwiecień</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Maj</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Czerwiec</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Lipiec</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Sierpień</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Wrzesień</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Październik</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Listopad</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Grudzień</a>
</nav>
</div>
<div class="dropdown w-dropdown" data-delay="0" data-hover="false">
<div class="dropdown-toggle w-dropdown-toggle">
<div class="w-icon-dropdown-toggle"></div>
<div class="text-block-10">Kategoria</div>
</div>
<nav class="dropdown-list-2 w-dropdown-list">
<a class="dropdown-link-3 w-dropdown-link" href="#">Styczeń</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Luty</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Marzec</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Kwiecień</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Maj</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Czerwiec</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Lipiec</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Sierpień</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Wrzesień</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Październik</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Listopad</a>
<a class="dropdown-link-3 w-dropdown-link" href="#">Grudzień</a>
</nav>
</div>
</div>
<div class="searchbarwrapper">
<form action="/search" class="search w-form"><label class="field-label" for="search">Wyszukiwarka</label><input class="search-input w-input" id="search" maxlength="256" name="query" placeholder="Ziemniaki" required="" type="search"/>
</form></div>
</div>
<div class="div-block-19">
<section class="sumawrapper">
<div class="sumatext1">Suma wyświetlanych wydatków: </div>
<div class="sumatext2" id="suma-wydatkow">0 pln</div>
</section>
</div>
<div class="tabelawrapper" id="tabelawrapper"></div>
<div class="backbuttonwrapper">
<a class="link-block w-inline-block" href="https://financeplan-topaz.vercel.app/"><img alt="" loading="lazy" src="images/arrow-white-finapla.svg" width="8"/>
<div class="text-block-7">Powrót do dashboardu</div>
</a>
</div>
</div>
</div>
</div>
<section class="footer-dark">
<div class="container-2">
<div class="footer-wrapper">
<a class="footer-brand w-inline-block" href="https://finapla.pl/"><img alt="" height="Auto" loading="lazy" src="images/finapla-logo-white.svg" width="200"/></a>
<div class="footer-content">
<div class="footer-block" id="w-node-b39f9473-83c2-a751-e656-9f88be66437c-ea336026">
<div class="title-small">Firma</div>
<a class="footer-link" href="#">Pomoc Techniczna</a>
<a class="footer-link" href="#">Cennik</a>
</div>
<div class="footer-block" id="w-node-b39f9473-83c2-a751-e656-9f88be664383-ea336026">
<div class="title-small">prawne</div>
<a class="footer-link" href="https://finapla.pl/polityka_prywatnosci" target="_blank">Polityka
              Prywatności</a>
<a class="footer-link" href="https://finapla.pl/polityka_cookies/" target="_blank">Polityka Cookies</a>
<a class="footer-link" href="https://finapla.pl/regulamin_uslugi" target="_blank">Regulamin aplikacji</a>
</div>
<div class="footer-block" id="w-node-b39f9473-83c2-a751-e656-9f88be66438c-ea336026">
<div class="title-small">social media</div>
<div class="footer-social-block">
<a class="footer-social-link w-inline-block" href="#"><img alt="" class="image-8" loading="lazy" src="https://uploads-ssl.webflow.com/62434fa732124a0fb112aab4/62434fa732124ac15112aad5_twitter%20small.svg"/></a>
<a class="footer-social-link w-inline-block" href="#"><img alt="" loading="lazy" src="https://uploads-ssl.webflow.com/62434fa732124a0fb112aab4/62434fa732124a389912aad8_linkedin%20small.svg"/></a>
<a class="footer-social-link w-inline-block" href="https://www.facebook.com/finaplapl/" target="_blank"><img alt="" loading="lazy" src="images/facebook.svg" width="10"/></a>
</div>
</div>
</div>
</div>
</div>
<div class="footer-divider"></div>
<div class="footer-copyright-center">Copyright © 2025 Cigga Paweł Kostyra. Wszelkie Prawa Zastrzeżone.</div>
</section>
<script crossorigin="anonymous" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=686fc94f73e5399aea336027" type="text/javascript"></script>
<script src="js/webflow.js" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
<script>
    async function loadTableData(userId) {
      console.log("START");
      console.log("userId:", userId);

      if (!userId) {
        document.getElementById("tabelawrapper").innerText = "Brak user_id";
        return;
      }

      try {
        const url = `https://pawelko.app.n8n.cloud/webhook/get-table?table=${userId}&format=json`;
        console.log("Wysyłam zapytanie:", url);

        const response = await fetch(url);
        const data = await response.json();

        const wrapper = document.getElementById("tabelawrapper");
        if (!wrapper) throw new Error("Brak diva #tabelawrapper");

        const hiddenCols = ['user_id', 'ItemID'];
        let html = "<table id='tabela'><thead><tr>";
        const desiredOrder = ['Data', 'Godzina', 'Kategoria', 'Opis', 'Cena'];
        const visibleKeys = desiredOrder.filter(key => data[0].hasOwnProperty(key));
        for (const key of visibleKeys) {
          html += `<th>${key}</th>`;
        }
        html += "</tr></thead><tbody>";
        for (const row of data) {
          html += "<tr>";
          for (const key of visibleKeys) {
            html += `<td>${row[key]}</td>`;
          }
          html += "</tr>";
        }
        html += "</tbody></table>";
        wrapper.innerHTML = html;
        makeTableSortable(wrapper.querySelector("table"));

        // Init DataTable
        let datatable = new simpleDatatables.DataTable("#tabela", {
          searchable: false,
          labels: {
            placeholder: "Szukaj...",
            perPage: "Wierszy na stronę",
            noRows: "Brak danych",
            info: "Wyświetlam {start}–{end} z {rows}",
            loading: "Ładowanie...",
            infoFiltered: "(przefiltrowano z {rows})"
          }
        });

        // 🧹 Ukryj defaultową wyszukiwarkę
        const dtSearch = document.querySelector('.dataTable-search');
        if (dtSearch) dtSearch.remove();

        function aktualizujSumę() {
          const rows = document.querySelectorAll("#tabela tbody tr:not([style*='display: none'])");
          let suma = 0;

          rows.forEach((row) => {
            const cells = row.cells;
            let priceCell;
            for (let i = 0; i < cells.length; i++) {
              const text = cells[i].textContent.trim();
              if (text.match(/[\d,]+/)) {
                priceCell = cells[i];
                break;
              }
            }

            if (priceCell) {
              const kwotaStr = priceCell.textContent
                .replace(/\./g, '')
                .replace(',', '.')
                .replace(/[^\d.-]/g, '');
              const kwota = parseFloat(kwotaStr);
              if (!isNaN(kwota)) suma += kwota;
            }
          });

          const sumaEl = document.getElementById("suma-wydatkow");
          if (sumaEl) sumaEl.innerText = `${suma.toFixed(2).replace('.', ',')} zł`;
        }

        aktualizujSumę();
        datatable.on("datatable.page", () => aktualizujSumę());
        datatable.on("datatable.search", () => aktualizujSumę());
        datatable.on("datatable.sort", () => aktualizujSumę());
        datatable.on("datatable.perpage", () => aktualizujSumę());

      } catch (err) {
        console.error("Błąd ładowania tabeli:", err);
        document.getElementById("tabelawrapper").innerText = "Błąd ładowania danych.";
      }
    }
  </script>
<script>
    function makeTableSortable(table) {
      const headers = table.querySelectorAll("th");
      headers.forEach((th, columnIndex) => {
        th.addEventListener("click", () => {
          const rows = Array.from(table.querySelectorAll("tbody tr"));
          const asc = !th.classList.contains("sorted-asc");

          rows.sort((a, b) => {
            const aText = a.children[columnIndex].innerText;
            const bText = b.children[columnIndex].innerText;

            const isNumber = !isNaN(aText) && !isNaN(bText);
            return asc
              ? (isNumber ? aText - bText : aText.localeCompare(bText))
              : (isNumber ? bText - aText : bText.localeCompare(aText));
          });

          headers.forEach(h => h.classList.remove("sorted-asc", "sorted-desc"));
          th.classList.add(asc ? "sorted-asc" : "sorted-desc");

          const tbody = table.querySelector("tbody");
          tbody.innerHTML = "";
          rows.forEach(row => tbody.appendChild(row));
        });
      });
    }
    document.getElementById("search").addEventListener("input", function () {
      const filter = this.value.toLowerCase();
      const rows = document.querySelectorAll("table tbody tr");
      rows.forEach(row => {
        const text = row.innerText.toLowerCase();
        row.style.display = text.includes(filter) ? "" : "none";
      });
    });
  </script>
<link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest"></script>
<script>
    const { createClient } = supabase;
    const supa = createClient(
      'https://vptpascqhmpmgnufevks.supabase.co',
      '...'
    );

    async function checkSession() {
      let session = null;
      for (let i = 0; i < 10; i++) {
        const result = await supa.auth.getSession();
        session = result.data.session;
        if (session) break;
        await new Promise(resolve => setTimeout(resolve, 200));
      }

      if (!session) {
        console.error("Brak sesji po 2 sekundach, przekierowuję...");
        window.location.href = "https://financeplan-topaz.vercel.app/logowanie/index.html";
        return;
      }

      const emailDisplay = document.querySelector(".text-block-3");
      if (emailDisplay) emailDisplay.textContent = session.user.email;

      const logoutBtn = document.querySelector(".w-button");
      if (logoutBtn) {
        logoutBtn.addEventListener("click", async () => {
          await supa.auth.signOut();
          window.location.href = "https://financeplan-topaz.vercel.app/logowanie/index.html";
        });
      }
      let datatable;
      loadTableData(session.user.id);
    }

    checkSession();


  </script>
<script>
    document.querySelectorAll('.w-dropdown').forEach(dropdown => {
      const toggle = dropdown.querySelector('.w-dropdown-toggle');
      const list = dropdown.querySelector('.w-dropdown-list');

      toggle.addEventListener('click', () => {
        list.classList.toggle('w--open');
      });

      // zamykanie po kliknięciu poza
      document.addEventListener('click', (e) => {
        if (!dropdown.contains(e.target)) {
          list.classList.remove('w--open');
        }
      });
    });
  </script>
<script>
    document.querySelectorAll('.dropdown-link-3').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const selectedMonth = link.textContent.trim(); // np. "Lipiec"

        // przemapuj na numer miesiąca
        const miesiace = {
          Styczeń: "01", Luty: "02", Marzec: "03", Kwiecień: "04",
          Maj: "05", Czerwiec: "06", Lipiec: "07", Sierpień: "08",
          Wrzesień: "09", Październik: "10", Listopad: "11", Grudzień: "12"
        };

        const monthNumber = miesiace[selectedMonth];

        document.querySelectorAll("#tabela tbody tr").forEach(row => {
          const dataCell = row.cells[0]; // Zakładam, że Data jest w pierwszej kolumnie
          if (dataCell && dataCell.textContent.includes(`-${monthNumber}-`)) {
            row.style.display = "";
          } else {
            row.style.display = "none";
          }
        });

        // zaktualizuj sumę po filtrze
        const event = new Event('datatable.search');
        document.querySelector("#tabela").dispatchEvent(event);
      });
    });
  </script>
<style>
    .dataTable-selector {
      background-color: #1a1a1a !important;
      color: white !important;
      border: 1px solid rgb(39, 39, 39) !important;
      border-radius: 6px !important;
      padding: 6px 12px !important;
      font-size: 14px !important;
      font-family: 'Montserrat', sans-serif !important;
      appearance: none !important;
      -webkit-appearance: none !important;
      -moz-appearance: none !important;
      outline: none !important;
      box-shadow: none !important;
      cursor: pointer !important;
    }

    .dataTable-selector:hover {
      background-color: #2a2a2a !important;
      border-color: #d0ef0b !important;
      color: #d0ef0b !important;
    }

    .dataTable-pagination a {
      background-color: transparent !important;
      color: white !important;
      border: 1px solid white !important;
      padding: 6px 12px;
      margin: 0 4px;
      border-radius: 6px;
      text-decoration: none;
      transition: all 0.2s ease-in-out;
      font-family: 'Montserrat', sans-serif;
    }

    .dataTable-pagination a:hover {
      background-color: #2a2a2a !important;
      border-color: #d0ef0b !important;
      color: #d0ef0b !important;
    }

    .dataTable-pagination .active {
      background-color: #d0ef0b !important;
      color: black !important;
      font-weight: bold;
      border-color: #d0ef0b !important;
    }
    }
  </style>
</link></body>
</html>