<!DOCTYPE html>
<!--  This site was created in Webflow. https://webflow.com  --><!--  Last Published: Thu Jul 10 2025 14:24:04 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="686fc94f73e5399aea336026" data-wf-site="686fc94f73e5399aea336027">

<head>
    <meta charset="utf-8">
    <title>Tabelka</title>
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="Webflow" name="generator">
    <link href="css/normalize.css" rel="stylesheet" type="text/css">
    <link href="css/webflow.css" rel="stylesheet" type="text/css">
    <link href="css/finxplaner-login-95a5ba27-a483aa21c3e9f.webflow.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com" rel="preconnect">
    <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script
        type="text/javascript">WebFont.load({ google: { families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic"] } });</script>
    <script
        type="text/javascript">!function (o, c) { var n = c.documentElement, t = " w-mod-"; n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch") }(window, document);</script>
    <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
    <link href="images/webclip.png" rel="apple-touch-icon">
</head>

<body class="body">
    <div class="div-block-4">
        <a href="https://www.finapla.pl/" class="w-inline-block"><img src="images/finapla.svg" loading="lazy"
                width="200" alt=""></a>
    </div>
    <div class="loginwrapper">
        <div class="loginandtextwrapper">
            <div class="logowanieprawawrapper">
                <div class="tablebg">
                    <div class="wpiszemailwrapper">
                        <h1 class="heading">Podaj nowe hasło</h1>
                        <div class="line"></div>
                        <div class="w-form">
                            <form id="email-form" name="email-form" data-name="Email Form" method="get" class="form"
                                data-wf-page-id="686fc94f73e5399aea336026"
                                data-wf-element-id="852c1829-f11b-716f-8943-dc9cca2cd488"><label for="email"
                                    class="field-label"><span class="text-span-4">Wpisz nowe hasło do
                                        konta</span></label><input class="text-field w-input" maxlength="256"
                                    name="email" data-name="Email" placeholder="" type="email" id="email"
                                    required=""><label for="email" class="field-label"><span class="text-span-4">Powtórz
                                        nowe hasło</span></label><input class="text-field w-input" maxlength="256"
                                    name="email" data-name="Email" placeholder="" type="email" id="email" required="">
                                <div class="text-block-8">*Hasło musi mieć minimum 6 znaków</div><input type="submit"
                                    data-wait="Wysyłanie..." class="submit-button seckondary w-button"
                                    value="Zaktualizuj hasło">
                            </form>
                            <div class="w-form-done">
                                <div>Thank you! Your submission has been received!</div>
                            </div>
                            <div class="w-form-fail">
                                <div>Oops! Something went wrong while submitting the form.</div>
                            </div>
                        </div>
                    </div>
                    <div class="w-embed">
                        <table id="tabela-uzytkownika" class="mojatabela">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Kategoria</th>
                                    <th>Kwota</th>
                                    <th>Opis</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="4">Ładowanie danych...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="backbuttonwrapper">
                    <a href="https://financeplan-topaz.vercel.app/" class="link-block w-inline-block"><img
                            src="images/arrow-white-finapla.svg" loading="lazy" width="8" alt="">
                        <div class="text-block-7">Powrót do logowania</div>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=686fc94f73e5399aea336027"
        type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>
    <script src="js/webflow.js" type="text/javascript"></script>
    <script>
        async function loadTableData() {
            const wrapper = document.getElementById("tabelabg");

            // Wyczyść wrapper (jeśli coś już było)
            wrapper.innerHTML = "";

            // user_id z URL-a
            const urlParams = new URLSearchParams(window.location.search);
            const userId = urlParams.get("user_id");

            // Jeśli brak user_id – pokaż komunikat
            if (!userId) {
                wrapper.innerHTML = `<p style="text-align:center;">Brak identyfikatora użytkownika.</p>`;
                return;
            }

            // Endpoint n8n
            const endpoint = `https://pawelko.app.n8n.cloud/webhook/get-table?table=Wydatki${userId}&format=json`;

            try {
                const res = await fetch(endpoint);
                const data = await res.json();

                if (!Array.isArray(data) || data.length === 0) {
                    wrapper.innerHTML = `<p style="text-align:center;">Brak danych do wyświetlenia.</p>`;
                    return;
                }

                // Zbuduj tabelę HTML
                const table = document.createElement("table");
                table.style.width = "100%";
                table.style.borderCollapse = "collapse";
                table.innerHTML = `
        <thead>
          <tr>
            <th style="text-align:left; padding:10px; border-bottom:1px solid #ccc;">Data</th>
            <th style="text-align:left; padding:10px; border-bottom:1px solid #ccc;">Kategoria</th>
            <th style="text-align:left; padding:10px; border-bottom:1px solid #ccc;">Cena</th>
            <th style="text-align:left; padding:10px; border-bottom:1px solid #ccc;">Opis</th>
          </tr>
        </thead>
        <tbody></tbody>
      `;

                const tbody = table.querySelector("tbody");

                data.forEach(item => {
                    const row = document.createElement("tr");
                    row.innerHTML = `
          <td style="padding:8px; border-bottom:1px solid #eee;">${item.Data || "-"}</td>
          <td style="padding:8px; border-bottom:1px solid #eee;">${item.Kategoria || "-"}</td>
          <td style="padding:8px; border-bottom:1px solid #eee;">${item.Cena || "-"}</td>
          <td style="padding:8px; border-bottom:1px solid #eee;">${item.Opis || "-"}</td>
        `;
                    tbody.appendChild(row);
                });

                wrapper.appendChild(table);
            } catch (err) {
                console.error("Błąd przy fetchu:", err);
                wrapper.innerHTML = `<p style="text-align:center;">Błąd podczas ładowania danych.</p>`;
            }
        }

        document.addEventListener("DOMContentLoaded", loadTableData);
    </script>
</body>

</html>